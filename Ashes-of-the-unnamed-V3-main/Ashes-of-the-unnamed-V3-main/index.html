<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ashes of the Unnamed â€” v3</title>
<style>
  body { margin:0; background:#000; overflow:hidden; color:#eee; font-family:sans-serif;}
  canvas { width:100%; height:100%; display:block; image-rendering:pixelated;}
  #hud {position:absolute; top:0; left:0; right:0; pointer-events:none;}
  .bar { height:16px; margin:6px; border:2px solid #555; background:#222; position:relative;}
  .bar span {position:absolute; left:0; top:0; bottom:0; background:red; animation:pulse 2s infinite;}
  #st span{background:green;} 
  #mp span{background:blue;}
  @keyframes pulse {0%,100%{filter:brightness(1);}50%{filter:brightness(1.3);}}
  #crosshair {position:absolute; left:50%; top:50%; width:24px; height:24px; 
              border:2px solid #fff; transform:translate(-50%,-50%); opacity:0.6;}
</style>
</head>
<body>
<canvas id="game"></canvas>

<!-- HUD overlay -->
<div id="hud">
  <div class="bar" id="hp"><span style="width:100%"></span></div>
  <div class="bar" id="st"><span style="width:100%"></span></div>
  <div class="bar" id="mp"><span style="width:100%"></span></div>
  <div id="crosshair"></div>
</div>

<script type="module">
  import * as THREE from "./libs/three.module.js";
  import { PointerLockControls } from "./libs/PointerLockControls.js";

  // --- Renderer setup ---
  const canvas = document.getElementById('game');
  const renderer = new THREE.WebGLRenderer({canvas});
  renderer.setSize(window.innerWidth, window.innerHeight);

  const scene = new THREE.Scene();
  scene.background = new THREE.Color(0x000000);

  const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
  camera.position.z = 5;

  const controls = new PointerLockControls(camera, document.body);

  // Lights
  scene.add(new THREE.AmbientLight(0x888888));
  const light = new THREE.PointLight(0xff4444, 1, 100);
  light.position.set(5, 10, 5);
  scene.add(light);

  // Simple cube (placeholder for your world)
  const geometry = new THREE.BoxGeometry();
  const material = new THREE.MeshStandardMaterial({color:0x8844ff});
  const cube = new THREE.Mesh(geometry, material);
  scene.add(cube);

  // Resize handling
  window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });

  // Animation loop
  function animate() {
    requestAnimationFrame(animate);
    cube.rotation.x += 0.01;
    cube.rotation.y += 0.01;
    renderer.render(scene, camera);
  }
  animate();
</script>
</body>
</html>
